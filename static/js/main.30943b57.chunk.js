(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{25:function(e,t,n){e.exports=n(61)},30:function(e,t,n){},31:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(21),o=n.n(r),l=(n(30),n(5)),s=n(8),i=n(7),m=n(24),u={stories:[],total:0},f=function(e,t){switch(t.type){case"SET_STORIES_ID":return Object(m.a)({},e,{stories:t.stories,total:t.total});default:return e}},d=(n(31),n(10)),E=n.n(d),h=function(){return c.a.createElement("section",{className:"error-page h-100 d-flex flex-column justify-content-center align-items-center"},c.a.createElement(E.a,null,c.a.createElement("h1",null,"This page does not exist."),c.a.createElement(s.b,{to:"/",exact:"true"},"Back to Homepage")))},p=(n(38),n(39),function(){return c.a.createElement("div",{className:"loader position-fixed w-100 h-100 d-flex justify-content-center align-items-center flex-column bg-white"},c.a.createElement("svg",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M 50,100 A 1,1 0 0 1 50,0"})),c.a.createElement("g",null,c.a.createElement("path",{d:"M 50,75 A 1,1 0 0 0 50,-25"})),c.a.createElement("defs",null,c.a.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},c.a.createElement("stop",{offset:"0%",style:{stopColor:"#FF56A1",stopOpacity:"1"}}),c.a.createElement("stop",{offset:"100%",style:{stopColor:"#FF9350",stopOpacity:"1"}})))),c.a.createElement("h1",null,"Loading stories ..."))}),b=(n(40),n(41),n(42),function(){return c.a.createElement("div",{className:"comments-loader d-flex justify-content-center"},c.a.createElement("div",{className:"comments-loader-spinner"}))}),g=(n(43),function(e){var t,n,r=Object(a.useState)(!1),o=Object(l.a)(r,2),s=o[0],i=o[1],m=Object(a.useState)([]),u=Object(l.a)(m,2),f=u[0],d=u[1];return c.a.createElement(E.a,{key:e.comment.id},c.a.createElement("div",{className:"single-comment py-3",key:e.comment.id,"data-id":e.comment.id},c.a.createElement("p",{className:"comment-author font-weight-bold mb-1"},e.comment.by),c.a.createElement("p",{className:"comment-time"},(n=e.comment.time,new Date(n).toUTCString())),c.a.createElement("p",{dangerouslySetInnerHTML:(t=e.comment.text,{__html:t}),className:"comment-body"}),e.comment.kids?c.a.createElement("button",{className:"text-white btn comment-btn",onClick:function(){return function(e){i(!s);var t=[];if(!f.length&&e.kids){var n=!0,a=!1,c=void 0;try{for(var r,o=e.kids[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=r.value;fetch("https://hacker-news.firebaseio.com/v0/item/".concat(l,".json?print=pretty")).then((function(e){return e.json()})).then((function(n){t.push(n),t.length===e.kids.length&&(t.sort((function(e,t){return t.time-e.time})),d(t))}))}}catch(m){a=!0,c=m}finally{try{n||null==o.return||o.return()}finally{if(a)throw c}}}}(e.comment)}},s?"HIDE REPLIES":"SHOW REPLIES"):null,s?c.a.createElement(v,{replies:!0,comments:f}):null))}),v=function(e){return c.a.createElement("div",{className:e.replies?"comments replies my-3":"comments my-3"},e.comments.length?e.comments.map((function(e){return c.a.createElement(g,{comment:e,key:e.id})})):c.a.createElement(b,null))},y=n(11),x=n(12),N=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)([]),i=Object(l.a)(s,2),m=i[0],u=i[1],f=function(){o(!r);var t=[];if(!m.length&&e.data.kids){var n=!0,a=!1,c=void 0;try{for(var l,s=e.data.kids[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var i=l.value;fetch("https://hacker-news.firebaseio.com/v0/item/".concat(i,".json?print=pretty")).then((function(e){return e.json()})).then((function(n){t.push(n),t.length===e.data.kids.length&&(t.sort((function(e,t){return t.time-e.time})),u(t))}))}}catch(f){a=!0,c=f}finally{try{n||null==s.return||s.return()}finally{if(a)throw c}}}};return c.a.createElement(E.a,null,c.a.createElement("div",{className:"story position-relative py-4","data-id":e.data.id},c.a.createElement("h2",{className:"mb-2 text-center text-md-left"},c.a.createElement("span",null,e.data.index,". "),c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.data.url},e.data.title)),c.a.createElement("div",{className:"story-info d-flex flex-column flex-md-row justify-content-center justify-content-md-between align-items-center"},c.a.createElement("div",{className:"story-details d-flex align-items-center"},c.a.createElement("p",{className:"mb-3 mb-md-0"},e.data.score," points | by",c.a.createElement("span",{className:"author-name"}," ",e.data.by," ")," |",c.a.createElement("span",null,"\xa0comments: ",e.data.kids?e.data.kids.length:0))),c.a.createElement("div",{className:"story-btns"},r&&e.data.kids?c.a.createElement("button",{onClick:f},"HIDE COMMENTS ",c.a.createElement(y.a,{icon:x.c,className:"ml-1"})):!r&&e.data.kids?c.a.createElement("button",{onClick:f},"SHOW COMMENTS ",c.a.createElement(y.a,{icon:x.b,className:"ml-1"})):null)),r?c.a.createElement("div",{className:"container"},c.a.createElement(v,{comments:m})):null))},j=n(47),w=Object(i.f)((function(e){var t=Object(a.useContext)(S).store,n=Object(a.useState)(+j.parse(e.location.search).page),r=Object(l.a)(n,2),o=r[0],i=r[1],m=Object(a.useState)([]),u=Object(l.a)(m,2),f=u[0],d=u[1];Object(a.useEffect)((function(){i(+j.parse(e.location.search).page);var n=j.parse(e.location.search).page?+j.parse(e.location.search).page:1,a=1===n?29:30*n-1,c=t.stories.slice(a-29,a+1),r=[];c.map((function(e){return fetch("https://hacker-news.firebaseio.com/v0/item/".concat(e,".json")).then((function(e){return e.json()})).then((function(e){var n=t.stories.findIndex((function(t){return t===e.id}));e.index=n+1,r.push(e);var a=r.find((function(e){return e.index===t.total}));(30===r.length||a)&&(r.sort((function(e,t){return e.index-t.index})),d(r))}))}))}),[e.location.search,t.stories.length]);var E=function(){d([]),window.scroll({top:0,behavior:"smooth"})};return c.a.createElement("section",{className:"homepage"},f.length?c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 col-lg-8 mx-auto"},c.a.createElement("h1",{className:"text-center mb-4"},"Hacker News"),c.a.createElement("div",{className:"stories"},f.map((function(e,t){return c.a.createElement(N,{key:e.id,data:e,storyNumber:t+1})}))),c.a.createElement("div",{className:"btns d-flex justify-content-center my-5"},function(){if(!f.find((function(e){return 1===e.index})))return c.a.createElement(s.b,{to:"/news?page=".concat(o>1?o-1:1),exact:"true",title:"Previous page",onClick:E},c.a.createElement("button",{className:"btn homepage-btn"},"PREVIOUS PAGE"))}(),function(){if(!f.find((function(e){return e.index===t.total})))return c.a.createElement(s.b,{to:"/news?page=".concat(o?o+1:2),onClick:E,exact:"true",title:"Next page"},c.a.createElement("button",{className:"btn homepage-btn"},"NEXT PAGE"))}())))):!t.stories.length||t.stories.length&&!f.length&&!o||!f.length&&Math.ceil(t.total/30)>=o?c.a.createElement(p,null):Math.ceil(t.total/30)<o?c.a.createElement(h,null):void 0)})),k=(n(59),function(){return c.a.createElement("footer",{className:"d-flex justify-content-center align-items-center"},c.a.createElement("p",{className:"text-center mb-0"},"Created with",c.a.createElement("img",{src:"/assets/img/heart.png",alt:"Heart",className:"heart-icon"}),"and ",c.a.createElement("i",null,"React.js"),c.a.createElement("img",{src:"/assets/img/react.png",alt:"React Logo",className:"react-icon"})))}),O=(n(60),function(){return c.a.createElement("div",{onClick:function(){window.scroll({top:0,behavior:"smooth"})},className:"to-top position-fixed d-flex justify-content-center align-items-center"},c.a.createElement(y.a,{icon:x.a,color:"white"}))}),S=Object(a.createContext)(),C=function(){var e=Object(a.useReducer)(f,u),t=Object(l.a)(e,2),n=t[0],r=t[1],o=new AbortController;return Object(a.useEffect)((function(){return fetch("https://hacker-news.firebaseio.com/v0/topstories.json",{signal:o.signal}).then((function(e){return e.json()})).then((function(e){var t=e.length;r({type:"SET_STORIES_ID",stories:e,total:t})})),function(){o.abort()}}),[]),c.a.createElement(s.a,{basename:"/hacker-news"},c.a.createElement(S.Provider,{value:{store:n,dispatch:r}},c.a.createElement("div",{className:"App"},c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/",exact:!0,component:w}),c.a.createElement(i.a,{path:"/news",component:w}),c.a.createElement(i.a,{component:h})),c.a.createElement(k,null),c.a.createElement(O,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[25,1,2]]]);
//# sourceMappingURL=main.30943b57.chunk.js.map